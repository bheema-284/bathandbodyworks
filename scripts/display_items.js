var foaming_soaps = [
  {
    Name: "Kitchen Lemon",
    Type: "Gentle Foaming Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dwe72bd3cd/crop/026018134_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Name: "Sunshine and Lemons",
    Type: "Gentle Foaming Hand Soap",
    Price: "$8.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw60f0de6e/crop/026325099_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Christman Traditions",
    Type: "Gentle Foaming Hand Soap",
    Price: "$22.0",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw5481050d/crop/026386990_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Snowy Adventures",
    Type: "Gentle Foaming Hand Soap",
    Price: "$22.0",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw07e35929/crop/026393763_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "Online Exclusive!",
    Name: "Merry Berry Kiss",
    Type: "Gentle Foaming Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw24061aab/crop/026385234_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Cucumber Melon",
    Type: "Gentle Foaming Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw7f8cfbf1/crop/026360021_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Pineapple Mango",
    Type: "Gentle Foaming Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw827be514/crop/026360023_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Brilliant Blue Sky",
    Type: "Gentle Foaming Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ab/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw9653c025/crop/026396720_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
];

var gel_soaps = [
  {
    Name: "Mahagony Teakwood",
    Type: "Gentle Gel Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw80c39210/crop/024642540_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Name: "Toasted Vanilla and Chai",
    Type: "Gentle Gel Hand Soap",
    Price: "$8.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw77c74bff/crop/026357777_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Frozen Lake",
    Type: "Gentle Gel Hand Soap",
    Price: "$22.0",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw19b4dd91/crop/026357780_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Sweater Weather",
    Type: "Gentle Gel Hand Soap",
    Price: "$22.0",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dwba4e0056/crop/026357782_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "Online Exclusive!",
    Name: "Peppermint Sugar Cookie",
    Type: "Gentle Gel Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dwb303024f/crop/026357779_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Frosted Cranberry",
    Type: "Gentle Gel Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dwd911202b/crop/026359631_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Winter",
    Type: "Gentle Gel Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw067ba809/crop/026359630_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Vanilla Bean Noel",
    Type: "Gentle Foaming Hand Soap",
    Price: "$7.50",
    Footer: "Mix & Match: 6/$27 or 4/$20",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw8afaeaec/crop/026350711_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
];

var sanitizers = [
  {
    Tag: "New!",
    Name: "Winter Candy Apple",
    Type: "PocketBac Hand Sanitizers,5-Pack",
    Price: "$8.00",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw3978a374/crop/026362636_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Sunshine and Lemons",
    Type: "Mositurizing Hand Sanitizer",
    Price: "$7.50",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dwf0aa6ee0/crop/026359105_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "Online Exlusive!",
    Name: "Champagne Toast",
    Type: "Anti Bacterial Hand Wipes",
    Price: "$8.50",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw10611fcb/crop/026297762_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Champagne Toast",
    Type: "PocketBac Hand Sanitizers,5-Pac",
    Price: "$8.50",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw83e21446/crop/026327829_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Cozy Christmas",
    Type: "PocketBac Hand Sanitizers,5-Pack",
    Price: "$8.00",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw7443b9e2/crop/026393773_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New!",
    Name: "Winter",
    Type: "Mositurizing Hand Sanitizer",
    Price: "$8.00",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw8e7bc948/crop/026362712_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Tag: "New Fragrance!",
    Name: "Snowy Adventures",
    Type: "Anti Bacterial Hand Wipes",
    Price: "$8.00",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dwe4b6a962/crop/026393767_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
  {
    Name: "Peppermint Sugar Cookie",
    Type: "PocketBac Hand Sanitizers,5-Pac",
    Price: "$8.00",
    img: "https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1ac/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw7079aa06/crop/026393771_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=o_s_",
  },
];

// Getting all the data from the localStorage.
var bag_items = JSON.parse(localStorage.getItem("cart_items")) || [];
var all_soaps = foaming_soaps.concat(gel_soaps);

var product_data = {
  "foaming soaps": foaming_soaps,
  "gel soaps": gel_soaps,
  sanitizers: sanitizers,
  "all soaps": all_soaps,
};

localStorage.setItem("products", JSON.stringify(product_data));
const urlParams = new URLSearchParams(window.location.search);
let title_string = urlParams.get("string");
let top_p = document.querySelector("#page_title");
top_p.textContent = title_string;
let arr = product_data[title_string.toLowerCase()];

displayProds(arr);

arr.map(function (elem) {
  let select = document.querySelector("#frag_name");
  let option = document.createElement("option");
  option.value = elem["Name"];
  option.text = elem["Name"];
  select.append(option);
});

function filter_prods() {
  let filter_value = document.querySelector("#frag_name").value;
  if (filter_value == "all") {
    displayProds(arr);
    return;
  }
  let filter_arr = arr.filter(function (elem) {
    return elem["Name"] == filter_value;
  });
  displayProds(filter_arr);
}

function sort_prods() {
  let sort_value = document.querySelector("#sort_by").value;
  let sorted_prods = arr.sort(function (a, b) {
    if (sort_value == "low") {
      return (
        Number(a["Price"].split("$")[1]) - Number(b["Price"].split("$")[1])
      );
    } else {
      return Number(b["Price"].split("$")[1] - a["Price"].split("$")[1]);
    }
  });

  displayProds(sorted_prods);
}

function displayProds(arr) {
  document.querySelector(".container").innerHTML = "";
  arr.map(function (elem) {
    let container = document.querySelector(".container");
    let text_div = document.createElement("div");
    let div = document.createElement("div");

    let name = document.createElement("p");
    name.textContent = elem["Name"];
    name.style.fontSize = "20px";

    let tag = document.createElement("b");
    if (elem["Tag"] == undefined) {
      tag.textContent = "New!";
    } else {
      tag.textContent = elem["Tag"];
    }

    tag.style.fontStyle = "italic";
    tag.style.color = "blue";

    let type = document.createElement("p");
    type.textContent = elem["Type"];
    type.style.fontSize = "12px";

    let price = document.createElement("p");
    price.textContent = elem["Price"];
    price.style.fontSize = "20px";

    let footer = document.createElement("p");
    footer.textContent = elem["Footer"];
    footer.style.color = "red";
    footer.style.fontSize = "12px";

    let button = document.createElement("button");
    button.textContent = "Add to Bag";
    button.addEventListener("click", function () {
      bag_items.push(elem);
      localStorage.setItem("cart_items", JSON.stringify(bag_items));
      window.alert("Item added to the cart");
    });

    let img = document.createElement("img");
    img.setAttribute("src", elem["img"]);

    text_div.append(tag, name, type, price, footer, button);
    div.append(img, text_div);

    container.append(div);
  });
}

document.querySelector("#submit_bag").addEventListener("click", function () {
  if (bag_items.length == 0) {
    window.alert("No items added into Cart");
  } else {
    window.location.href = "Cart.html";
  }
});

document.querySelector("#btn").addEventListener("click", submit);

function submit(event) {
  event.preventDefault();
  alert("Thank You For Connecting with us");
}

// localStorage.setItem("products",JSON.stringify(product_data))
